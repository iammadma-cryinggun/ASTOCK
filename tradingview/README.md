# 📈 TradingView 集成快速开始

## 🚀 3 分钟上手

### Step 1: 安装指标（1 分钟）

1. 打开 https://www.tradingview.com
2. 点击底部 "Pine Editor" 标签
3. 复制 `StockSniper_Indicator.pine` 代码
4. 粘贴到 Pine Editor
5. 点击 "添加到图表"

**✅ 完成！** 你现在可以看到：
- 右上角：操作检查清单
- 图表上：均线、狙击点位标注（★理想买点）

---

### Step 2: 查看 AI 分析（2 分钟）

当你在图表上看到 ★理想买点 时：

1. 复制股票代码（如 AAPL）
2. 在浏览器访问：
   ```
   https://mystock.zeabur.app/api/analysis?code=AAPL&signal=IDEAL_BUY
   ```
3. 查看 JSON 返回的完整分析

**返回内容**：
- ✅ 技术分析
- ✅ FinBERT 新闻情绪
- ✅ 操作建议
- ✅ 风险警报

---

## 🎯 配置自动 Alert（可选）

### 创建 Alert

1. 点击图表右上角的 📡 Alert 按钮
2. 条件：选择 "狙击信号"
3. 触发条件：狙击信号 不等于 "NONE"
4. 勾选 "Webhook URL"
5. 输入：`https://mystock.zeabur.app/api/analysis`
6. 消息：
   ```json
   {"code": "{{ticker}}", "signal": "{{plot_0}}", "price": {{close}}}
   ```
7. 点击 "创建"

**✅ 完成！** 当狙击点位出现时，会自动调用 AI 分析。

---

## 📊 指标说明

### 操作检查清单（右上角面板）

- **多头排列**：MA5 > MA10 > MA20 > MA60
- **MACD 多头**：MACD 线 > 信号线
- **KDJ 多头**：K > D 且在 20-80 区间
- **双共振**：MACD 和 KDJ 同时多头
- **乖离率**：(收盘价 - MA20) / MA20 × 100%
- **布林带位置**：价格在布林带中的位置（0-100%）
- **当前趋势**：多头/空头/震荡
- **操作建议**：买入/卖出/持有/观望
- **信号强度**：0-5 分

### 狙击点位

- **★理想买点**：
  - 多头排列 ✅
  - MACD + KDJ 双多头 ✅
  - 乖离率 < 2% ✅

- **☆理想卖点**：
  - 空头排列 ✅
  - MACD + KDJ 双空头 ✅
  - 乖离率 > 5% ✅

### 风险警报

- **背景变红色**：乖离率 > 8% 或 < -8%（极端风险）
- **背景变橙色**：价格突破布林带（突破信号）

---

## 🔧 自定义参数

点击指标名称旁边的设置图标⚙️：

### 趋势线
- ZigZag 偏离%：默认 5%（越小越敏感）
- ZigZag 回看周期：默认 20

### 均线系统
- 快速均线：默认 5
- 中线均线：默认 10
- 慢速均线：默认 20
- 超慢均线：默认 60

### 狙击点位
- 理想买点乖离率%：默认 2.0%
- 理想卖点乖离率%：默认 5.0%

**提示**：降低乖离率阈值会让信号更频繁，但可能增加假信号。

---

## 📱 支持的市场

### ✅ 完全支持（技术分析 + AI）

- **中国 A 股**：000001.SZ（平安银行）、600036.SH（招商银行）
- **国内期货**：SC（原油）、AU（黄金）、AG（白银）

### ✅ 仅技术分析（TradingView 数据）

- **美股**：AAPL、TSLA、NVDA
- **港股**：0700.HK（腾讯）、9988.HK（阿里巴巴）
- **国际期货**：GC（黄金）、CL（原油）

---

## 🐛 常见问题

### Q: 为什么没有狙击点位显示？

A: 可能原因：
1. 市场波动小，未达到狙击条件
2. 参数设置过严格
3. **解决方法**：降低乖离率参数（如从 2% 降到 1.5%）

### Q: API 返回错误？

A: 检查：
1. 股票代码格式是否正确（AAPL、000001.SZ）
2. 后端服务是否正常运行
3. 网络连接是否正常

### Q: Alert 不触发？

A: 检查：
1. Alert 条件是否设置为 "狙击信号 != NONE"
2. Webhook URL 是否正确
3. 查看 TradingView Alert 日志

---

## 📚 更多信息

完整文档：[TRADINGVIEW_INTEGRATION_GUIDE.md](../docs/TRADINGVIEW_INTEGRATION_GUIDE.md)

---

## 🎬 开始使用

**现在就试试！**

1. 复制 Pine Script 代码到 TradingView
2. 查看图表上的技术信号
3. 访问 API 获取 AI 分析

**祝交易顺利！📈💰**
